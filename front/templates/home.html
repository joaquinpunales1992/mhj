{% load static compress %}

<!DOCTYPE HTML>
<html>
	<head>
		<title>My House in Japan</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		{% compress css %}
			<link rel="stylesheet" type="text/css" href="{% static 'assets/css/main.css' %}" />
		{% endcompress %}
		<noscript><link rel="stylesheet" href="{% static 'assets/css/noscript.css' %}" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<h1><strong>My House in Japan</strong></h1>
						<nav>
							<ul>
								<li><a href="#footer" class="icon solid fa-info-circle">About</a></li>
							</ul>
						</nav>
					</header>

				<!-- Main -->
					<div id="main">
						{% for property in properties %}
							{% if property.property_has_any_image %}
								<article class="thumb" style="display: flex; gap: 4rem; align-items: flex-start; border-width: 10px;">
									
									{% with property.get_ordered_images.first as first_image %}
										{% if first_image.show_in_front %}
											<a href="{{ first_image.file }}" class="image"><img src="{{ first_image.file }}" alt="{{ first_image.alt }}"/></a>
										{% endif %}
									{% endwith %}
									<p id="property-location" hidden>üìç{{ property.get_location_for_front }}</p>
									<p id="property-price" hidden>{{ property.get_price_for_front }}</p>

									
									<div class="details-box" style="
										padding: 1rem 1.5rem;
										border-radius: 8px;
										box-shadow: 0 2px 8px rgba(0,0,0,0.1);
										background: rgba(0, 0, 0, 0.5);
										min-width: 300px;
										max-width: 100px;
										display: flex;
										flex-direction: column;
										justify-content: space-between;
										height: 200%;
									">
										<!-- Bottom-aligned row -->
										<div style="
											display: flex;
											justify-content: space-between;
											align-items: flex-end;
											width: 100%;
										">
											<!-- Info on the left -->
											<div style="display: flex; flex-direction: column; justify-content: space-between; width: 100%;">
												{% if property.location %}
													<p style="margin: 0;">üìç {{ property.get_location_for_front }}</p>
												{% endif %}
												{% if property.price %}
													<p style="margin: 0;"><strong></strong> {{ property.get_price_for_front }}</p>
												{% endif %}
												{% if user.is_authenticated %}
													<button class="primary" onclick="window.location.href='{% url "contact_seller" property.pk %}'">
														<span class="lock-icon"></span> Contact the Seller
													</button>
												{% else %}
													<button class="primary" onclick="window.location.href='{% url "authenticate" property.pk %}'">
														<span class="lock-icon">üîí</span> Contact the Seller
													</button>
												{% endif %}
											</div>
										</div>
									</div>
								</article>
							{% endif %}
						{% endfor %}
					</div>

				<!-- Footer -->
					<footer id="footer" class="panel">
						<div class="inner">
							<div>
								<section>
									<h2>We guide you through every step of buying your dream home in Japan.</h2>
									<p>No matter your budget, owning a home in Japan is within reach.</p>
								</section>
								<section>
									<h2>Follow us on Instagram</h2>
									<ul class="icons">
										<li><a href="https://www.instagram.com/myhouseinjapan/" class="icon brands fa-instagram"></a></li>
									</ul>
								</section>
								<p class="copyright">
									&copy; My House in Japan</a>.
								</p>
							</div>
							<div>
							</div>
						</div>
					</footer>

			</div>

		<!-- Scripts -->
			<script src="{% static 'assets/js/jquery.min.js' %}"></script>
			<script src="{% static 'assets/js/jquery.poptrox.min.js' %}"></script>
			<script src="{% static 'assets/js/browser.min.js' %}"></script>
			<script src="{% static 'assets/js/breakpoints.min.js' %}"></script>
			<script src="{% static 'assets/js/util.js' %}"></script>
			<script src="{% static 'assets/js/main.js' %}"></script>

	</body>
</html>